<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™šé¤é¸æ“‡å™¨ - éš¨æ©Ÿæ±ºå®šä»Šå¤©åƒä»€éº¼</title>
    <meta name="description" content="è®“æˆ‘å€‘å¹«ä½ éš¨æ©Ÿé¸æ“‡é™„è¿‘çš„é¤å»³ï¼è¼¸å…¥åœ°å€å’Œç”¨é¤æ™‚é–“ï¼Œæ‰¾åˆ°é–‹åº—çš„é¤å»³ä¸¦éš¨æ©Ÿæ¨è–¦ã€‚">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸ½ï¸ æ™šé¤é¸æ“‡å™¨</h1>
            <p class="subtitle">ä¸çŸ¥é“åƒä»€éº¼å—ï¼Ÿè®“æˆ‘å€‘å¹«ä½ æ±ºå®šï¼</p>
        </header>

        <main class="main">
            <!-- Step 1: Address Input -->
            <section class="step" id="step-address">
                <div class="step-content">
                    <h2>ğŸ“ ä½ ç¾åœ¨åœ¨å“ªè£¡ï¼Ÿ</h2>
                    <div class="input-group">
                        <input type="text" id="address-input" placeholder="è¼¸å…¥ä½ çš„åœ°å€æˆ–ä½ç½®" autocomplete="street-address">
                        <button id="address-submit" class="btn btn-primary">ç¢ºèªä½ç½®</button>
                    </div>
                    <div class="loading" id="address-loading" style="display: none;">
                        <div class="spinner"></div>
                        <span>æ­£åœ¨å®šä½ä¸­...</span>
                    </div>
                </div>
            </section>

            <!-- Step 2: Time Selection -->
            <section class="step" id="step-time" style="display: none;">
                <div class="step-content">
                    <h2>ğŸ•’ ä½ æƒ³å¹¾é»åƒé£¯ï¼Ÿ</h2>
                    <div class="time-selector">
                        <input type="time" id="meal-time" value="18:00">
                        <div class="time-options">
                            <button class="time-btn" data-time="17:30">5:30 PM</button>
                            <button class="time-btn" data-time="18:00">6:00 PM</button>
                            <button class="time-btn" data-time="18:30">6:30 PM</button>
                            <button class="time-btn" data-time="19:00">7:00 PM</button>
                            <button class="time-btn" data-time="19:30">7:30 PM</button>
                            <button class="time-btn" data-time="20:00">8:00 PM</button>
                        </div>
                        <button id="time-submit" class="btn btn-primary">é–‹å§‹å°‹æ‰¾é¤å»³</button>
                    </div>
                </div>
            </section>

            <!-- Step 3: Restaurant Search -->
            <section class="step" id="step-search" style="display: none;">
                <div class="step-content">
                    <h2>ğŸ” æ­£åœ¨å°‹æ‰¾é™„è¿‘çš„é¤å»³</h2>
                    <div class="search-status">
                        <div class="loading">
                            <div class="spinner"></div>
                            <span id="search-status-text">æœå°‹ä¸­...</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 4: Random Selection -->
            <section class="step" id="step-select" style="display: none;">
                <div class="step-content">
                    <h2>ğŸ² è®“æˆ‘å€‘éš¨æ©Ÿé¸æ“‡ä¸€å®¶é¤å»³</h2>
                    <div class="restaurant-roulette">
                        <div class="roulette-container">
                            <div class="restaurant-card" id="current-restaurant">
                                <div class="restaurant-name">æº–å‚™ä¸­...</div>
                                <div class="restaurant-info"></div>
                            </div>
                        </div>
                        <div class="selection-controls">
                            <button id="start-random" class="btn btn-primary btn-large">é–‹å§‹é¸æ“‡ï¼</button>
                            <button id="reroll" class="btn btn-secondary" style="display: none;">ä¸å–œæ­¡ï¼Ÿå†ä¾†ä¸€æ¬¡</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 5: Result -->
            <section class="step" id="step-result" style="display: none;">
                <div class="step-content">
                    <h2>ğŸ‰ å°±æ±ºå®šæ˜¯é€™å®¶äº†ï¼</h2>
                    <div class="result-container">
                        <div class="restaurant-result" id="final-restaurant">
                            <!-- Restaurant details will be populated here -->
                        </div>
                        <div class="map-container" id="map-container">
                            <!-- Map will be loaded here on desktop -->
                        </div>
                        <div class="result-actions">
                            <button id="view-on-maps" class="btn btn-primary" target="_blank">
                                ğŸ“ åœ¨ Google Maps æŸ¥çœ‹
                            </button>
                            <button id="start-over" class="btn btn-secondary">é‡æ–°é–‹å§‹</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Error Message -->
            <section class="error-section" id="error-section" style="display: none;">
                <div class="error-content">
                    <h2>ğŸ˜… å“å‘€ï¼Œå‡ºäº†é»å•é¡Œ</h2>
                    <p id="error-message">è«‹ç¨å¾Œå†è©¦æˆ–æª¢æŸ¥æ‚¨çš„ç¶²è·¯é€£ç·š</p>
                    <button id="retry-btn" class="btn btn-primary">é‡è©¦</button>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>Made with â¤ï¸ for food lovers</p>
        </footer>
    </div>

    <script src="config.js"></script>
    <script src="script.js"></script>
    <script>
        // Dynamically load Google Maps API with the configured key
        function loadGoogleMapsAPI() {
            const apiKey = window.CONFIG?.GOOGLE_MAPS_API_KEY || 'YOUR_API_KEY_HERE';
            const script = document.createElement('script');
            script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places&callback=initMap`;
            script.async = true;
            script.defer = true;
            document.head.appendChild(script);
        }
        
        // Load API when DOM is ready
        document.addEventListener('DOMContentLoaded', loadGoogleMapsAPI);
    </script>
</body>
</html>